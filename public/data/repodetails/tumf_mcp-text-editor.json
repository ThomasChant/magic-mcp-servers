{
  "mcp_name": "tumf/mcp-text-editor",
  "mcp_description": "üêç üè† - A line-oriented text file editor. Optimized for LLM tools with efficient partial file access to minimize token usage.",
  "mcp_id": "tumf_mcp-text-editor",
  "fetch_timestamp": "2025-06-23T09:07:55.318484Z",
  "github_url": "https://github.com/tumf/mcp-text-editor",
  "repository": {
    "name": "mcp-text-editor",
    "full_name": "tumf/mcp-text-editor",
    "description": null,
    "html_url": "https://github.com/tumf/mcp-text-editor",
    "created_at": "2024-12-11T10:12:28Z",
    "updated_at": "2025-06-23T02:32:08Z",
    "pushed_at": "2025-05-04T13:37:20Z",
    "size": 252,
    "stargazers_count": 123,
    "watchers_count": 123,
    "forks_count": 16,
    "open_issues_count": 1,
    "language": "Python",
    "license": "MIT License",
    "topics": [],
    "default_branch": "main",
    "owner": {
      "login": "tumf",
      "type": "User",
      "avatar_url": "https://avatars.githubusercontent.com/u/69994?v=4",
      "html_url": "https://github.com/tumf"
    },
    "has_issues": true,
    "has_projects": true,
    "has_downloads": true,
    "has_wiki": true,
    "has_pages": false,
    "archived": false,
    "disabled": false,
    "visibility": "public",
    "network_count": 16,
    "subscribers_count": 1,
    "languages": {
      "Python": 186140,
      "Dockerfile": 1230,
      "Makefile": 473
    },
    "language_percentages": {
      "Python": 99.09,
      "Dockerfile": 0.65,
      "Makefile": 0.25
    },
    "pull_requests_count": 6,
    "contributors_count": 9,
    "latest_release": {
      "tag_name": "v1.0.2",
      "name": "",
      "published_at": "2024-12-22T15:31:21Z",
      "body": "## [1.0.2] - 2024-12-22\r\n\r\n### Fixed\r\n\r\n- Remove unexpected print logs",
      "prerelease": false,
      "draft": false
    },
    "tags": [
      {
        "name": "v1.1.0b7",
        "commit_sha": "32b809d7b57da6d428308b07841f4f30ed2ff83a"
      },
      {
        "name": "v1.1.0b6",
        "commit_sha": "072bd17cd9aa3d04f69d3038196924918d844e80"
      },
      {
        "name": "v1.1.0b5",
        "commit_sha": "c612d9fbd128ce4b1f04579dfc821e4b845e8c9d"
      },
      {
        "name": "v1.1.0b4",
        "commit_sha": "32cba5b6229e07f80ed363bde51f8e67c732cb97"
      },
      {
        "name": "v1.1.0b3",
        "commit_sha": "c77cb4fc3eb14ada910f78e5b3fe73b88f3f7e31"
      },
      {
        "name": "v1.1.0b2",
        "commit_sha": "d79c3ec4de07da89eb1c750ff63d6e67dba71108"
      },
      {
        "name": "v1.1.0b1",
        "commit_sha": "176c1c864b67d3728548e269041de4ad1ecfc5bb"
      },
      {
        "name": "v1.0.2",
        "commit_sha": "306162a2c7f8ffd438ab186aafae9715e336fe37"
      },
      {
        "name": "v1.0.0",
        "commit_sha": "aca2fb415486044874c2fab6f856a58fee4ef3f9"
      }
    ],
    "latest_version": "v1.1.0b7"
  },
  "readme": "# MCP Text Editor Server\n\n[![codecov](https://codecov.io/gh/tumf/mcp-text-editor/branch/main/graph/badge.svg?token=52D51U0ZUR)](https://codecov.io/gh/tumf/mcp-text-editor)\n[![smithery badge](https://smithery.ai/badge/mcp-text-editor)](https://smithery.ai/server/mcp-text-editor)\n[![Glama MCP Server](https://glama.ai/mcp/servers/k44dnvso10/badge)](https://glama.ai/mcp/servers/k44dnvso10)\n[![MseeP.ai Security Assessment Badge](https://mseep.net/pr/tumf-mcp-text-editor-badge.png)](https://mseep.ai/app/tumf-mcp-text-editor)\n\nA Model Context Protocol (MCP) server that provides line-oriented text file editing capabilities through a standardized API. Optimized for LLM tools with efficient partial file access to minimize token usage.\n\n## Quick Start for Claude.app Users\n\nTo use this editor with Claude.app, add the following configuration to your prompt:\n\n```shell\ncode ~/Library/Application\\ Support/Claude/claude_desktop_config.json\n```\n\n```json\n{\n  \"mcpServers\": {\n    \"text-editor\": {\n      \"command\": \"uvx\",\n      \"args\": [\n        \"mcp-text-editor\"\n      ]\n    }\n  }\n}\n```\n\nor with docker:\n```json\n{\n  \"mcpServers\": {\n    \"text-editor\": {\n      \"command\": \"docker\",\n      \"args\": [\n          \"run\",\n          \"-i\",\n          \"--rm\",\n          \"--mount\",\n          \"type=bind,src=/some/path/src,dst=/some/path/dst\",\n          \"mcp/text-editor\"\n      ]\n    }\n  }\n}\n```\n\n## Overview\n\nMCP Text Editor Server is designed to facilitate safe and efficient line-based text file operations in a client-server architecture. It implements the Model Context Protocol, ensuring reliable file editing with robust conflict detection and resolution. The line-oriented approach makes it ideal for applications requiring synchronized file access, such as collaborative editing tools, automated text processing systems, or any scenario where multiple processes need to modify text files safely. The partial file access capability is particularly valuable for LLM-based tools, as it helps reduce token consumption by loading only the necessary portions of files.\n\n### Key Benefits\n\n- Line-based editing operations\n- Token-efficient partial file access with line-range specifications\n- Optimized for LLM tool integration\n- Safe concurrent editing with hash-based validation\n- Atomic multi-file operations\n- Robust error handling with custom error types\n- Comprehensive encoding support (utf-8, shift_jis, latin1, etc.)\n\n## Features\n\n- Line-oriented text file editing and reading\n- Smart partial file access to minimize token usage in LLM applications\n- Get text file contents with line range specification\n- Read multiple ranges from multiple files in a single operation\n- Line-based patch application with correct handling of line number shifts\n- Edit text file contents with conflict detection\n- Flexible character encoding support (utf-8, shift_jis, latin1, etc.)\n- Support for multiple file operations\n- Proper handling of concurrent edits with hash-based validation\n- Memory-efficient processing of large files\n\n## Requirements\n\n- Python 3.11 or higher\n- POSIX-compliant operating system (Linux, macOS, etc.) or Windows\n- Sufficient disk space for text file operations\n- File system permissions for read/write operations\n\n1. Install Python 3.11+\n\n```bash\npyenv install 3.11.6\npyenv local 3.11.6\n```\n\n2. Install uv (recommended) or pip\n\n```bash\ncurl -LsSf https://astral.sh/uv/install.sh | sh\n```\n\n3. Create virtual environment and install dependencies\n\n```bash\nuv venv\nsource .venv/bin/activate  # On Windows: .venv\\Scripts\\activate\nuv pip install -e \".[dev]\"\n```\n\n## Requirements\n\n- Python 3.13+\n- POSIX-compliant operating system (Linux, macOS, etc.) or Windows\n- File system permissions for read/write operations\n\n## Installation\n\n### Run via uvx\n\n```bash\nuvx mcp-text-editor\n```\n\n### Installing via Smithery\n\nTo install Text Editor Server for Claude Desktop automatically via [Smithery](https://smithery.ai/server/mcp-text-editor):\n\n```bash\nnpx -y @smithery/cli install mcp-text-editor --client claude\n```\n\n### Manual Installation\n\n1. Install Python 3.13+\n\n```bash\npyenv install 3.13.0\npyenv local 3.13.0\n```\n\n### Docker Installation\n```\ndocker build --network=host -t mcp/text-editor .\n```\n\n2. Install uv (recommended) or pip\n\n```bash\ncurl -LsSf https://astral.sh/uv/install.sh | sh\n```\n\n3. Create virtual environment and install dependencies\n\n```bash\nuv venv\nsource .venv/bin/activate  # On Windows: .venv\\Scripts\\activate\nuv pip install -e \".[dev]\"\n```\n\n## Usage\n\nStart the server:\n\n```bash\npython -m mcp_text_editor\n```\n\nStart the server with docker:\n\n```bash\ndocker run -i --rm --mount \"type=bind,src=/some/path/src,dst=/some/path/dst\" mcp/text-editor\n```\n\nwith inspector:\n\n```bash\nnpx @modelcontextprotocol/inspector docker run -i --rm --mount \"type=bind,src=/some/path/src,dst=/some/path/dst\" mcp/text-editor\n```\n\n### MCP Tools\n\nThe server provides several tools for text file manipulation:\n\n#### get_text_file_contents\n\nGet the contents of one or more text files with line range specification.\n\n**Single Range Request:**\n\n```json\n{\n  \"file_path\": \"path/to/file.txt\",\n  \"line_start\": 1,\n  \"line_end\": 10,\n  \"encoding\": \"utf-8\"  // Optional, defaults to utf-8\n}\n```\n\n**Multiple Ranges Request:**\n\n```json\n{\n  \"files\": [\n    {\n      \"file_path\": \"file1.txt\",\n      \"ranges\": [\n        {\"start\": 1, \"end\": 10},\n        {\"start\": 20, \"end\": 30}\n      ],\n      \"encoding\": \"shift_jis\"  // Optional, defaults to utf-8\n    },\n    {\n      \"file_path\": \"file2.txt\",\n      \"ranges\": [\n        {\"start\": 5, \"end\": 15}\n      ]\n    }\n  ]\n}\n```\n\nParameters:\n- `file_path`: Path to the text file\n- `line_start`/`start`: Line number to start from (1-based)\n- `line_end`/`end`: Line number to end at (inclusive, null for end of file)\n- `encoding`: File encoding (default: \"utf-8\"). Specify the encoding of the text file (e.g., \"shift_jis\", \"latin1\")\n\n**Single Range Response:**\n\n```json\n{\n  \"contents\": \"File contents\",\n  \"line_start\": 1,\n  \"line_end\": 10,\n  \"hash\": \"sha256-hash-of-contents\",\n  \"file_lines\": 50,\n  \"file_size\": 1024\n}\n```\n\n**Multiple Ranges Response:**\n\n```json\n{\n  \"file1.txt\": [\n    {\n      \"content\": \"Lines 1-10 content\",\n      \"start\": 1,\n      \"end\": 10,\n      \"hash\": \"sha256-hash-1\",\n      \"total_lines\": 50,\n      \"content_size\": 512\n    },\n    {\n      \"content\": \"Lines 20-30 content\",\n      \"start\": 20,\n      \"end\": 30,\n      \"hash\": \"sha256-hash-2\",\n      \"total_lines\": 50,\n      \"content_size\": 512\n    }\n  ],\n  \"file2.txt\": [\n    {\n      \"content\": \"Lines 5-15 content\",\n      \"start\": 5,\n      \"end\": 15,\n      \"hash\": \"sha256-hash-3\",\n      \"total_lines\": 30,\n      \"content_size\": 256\n    }\n  ]\n}\n```\n\n#### patch_text_file_contents\n\nApply patches to text files with robust error handling and conflict detection. Supports editing multiple files in a single operation.\n\n**Request Format:**\n\n```json\n{\n  \"files\": [\n    {\n      \"file_path\": \"file1.txt\",\n      \"hash\": \"sha256-hash-from-get-contents\",\n      \"encoding\": \"utf-8\",  // Optional, defaults to utf-8\n      \"patches\": [\n        {\n          \"start\": 5,\n          \"end\": 8,\n          \"range_hash\": \"sha256-hash-of-content-being-replaced\",\n          \"contents\": \"New content for lines 5-8\\n\"\n        },\n        {\n          \"start\": 15,\n          \"end\": null,  // null means end of file\n          \"range_hash\": \"sha256-hash-of-content-being-replaced\",\n          \"contents\": \"Content to append\\n\"\n        }\n      ]\n    }\n  ]\n}\n```\n\nImportant Notes:\n1. Always get the current hash and range_hash using get_text_file_contents before editing\n2. Patches are applied from bottom to top to handle line number shifts correctly\n3. Patches must not overlap within the same file\n4. Line numbers are 1-based\n5. `end: null` can be used to append content to the end of file\n6. File encoding must match the encoding used in get_text_file_contents\n\n**Success Response:**\n\n```json\n{\n  \"file1.txt\": {\n    \"result\": \"ok\",\n    \"hash\": \"sha256-hash-of-new-contents\"\n  }\n}\n```\n\n**Error Response with Hints:**\n\n```json\n{\n  \"file1.txt\": {\n    \"result\": \"error\",\n    \"reason\": \"Content hash mismatch\",\n    \"suggestion\": \"get\",  // Suggests using get_text_file_contents\n    \"hint\": \"Please run get_text_file_contents first to get current content and hashes\"\n  }\n}\n```\n\n    \"result\": \"error\",\n    \"reason\": \"Content hash mismatch - file was modified\",\n    \"hash\": \"current-hash\",\n    \"content\": \"Current file content\"\n\n  }\n}\n\n```\n\n### Common Usage Pattern\n\n1. Get current content and hash:\n\n```python\ncontents = await get_text_file_contents({\n    \"files\": [\n        {\n            \"file_path\": \"file.txt\",\n            \"ranges\": [{\"start\": 1, \"end\": null}]  # Read entire file\n        }\n    ]\n})\n```\n\n2. Edit file content:\n\n```python\nresult = await edit_text_file_contents({\n    \"files\": [\n        {\n            \"path\": \"file.txt\",\n            \"hash\": contents[\"file.txt\"][0][\"hash\"],\n            \"encoding\": \"utf-8\",  # Optional, defaults to \"utf-8\"\n            \"patches\": [\n                {\n                    \"line_start\": 5,\n                    \"line_end\": 8,\n                    \"contents\": \"New content\\n\"\n                }\n            ]\n        }\n    ]\n})\n```\n\n3. Handle conflicts:\n\n```python\nif result[\"file.txt\"][\"result\"] == \"error\":\n    if \"hash mismatch\" in result[\"file.txt\"][\"reason\"]:\n        # File was modified by another process\n        # Get new content and retry\n        pass\n```\n\n### Error Handling\n\nThe server handles various error cases:\n- File not found\n- Permission errors\n- Hash mismatches (concurrent edit detection)\n- Invalid patch ranges\n- Overlapping patches\n- Encoding errors (when file cannot be decoded with specified encoding)\n- Line number out of bounds\n\n## Security Considerations\n\n- File Path Validation: The server validates all file paths to prevent directory traversal attacks\n- Access Control: Proper file system permissions should be set to restrict access to authorized directories\n- Hash Validation: All file modifications are validated using SHA-256 hashes to prevent race conditions\n- Input Sanitization: All user inputs are properly sanitized and validated\n- Error Handling: Sensitive information is not exposed in error messages\n\n## Troubleshooting\n\n### Common Issues\n\n1. Permission Denied\n   - Check file and directory permissions\n   - Ensure the server process has necessary read/write access\n\n2. Hash Mismatch and Range Hash Errors\n   - The file was modified by another process\n   - Content being replaced has changed\n   - Run get_text_file_contents to get fresh hashes\n\n3. Encoding Issues\n   - Verify file encoding matches the specified encoding\n   - Use utf-8 for new files\n   - Check for BOM markers in files\n\n4. Connection Issues\n   - Verify the server is running and accessible\n   - Check network configuration and firewall settings\n\n5. Performance Issues\n   - Consider using smaller line ranges for large files\n   - Monitor system resources (memory, disk space)\n   - Use appropriate encoding for file type\n\n## Development\n\n### Setup\n\n1. Clone the repository\n2. Create and activate a Python virtual environment\n3. Install development dependencies: `uv pip install -e \".[dev]\"`\n4. Run tests: `make all`\n\n### Code Quality Tools\n\n- Ruff for linting\n- Black for code formatting\n- isort for import sorting\n- mypy for type checking\n- pytest-cov for test coverage\n\n### Testing\n\nTests are located in the `tests` directory and can be run with pytest:\n\n```bash\n# Run all tests\npytest\n\n# Run tests with coverage report\npytest --cov=mcp_text_editor --cov-report=term-missing\n\n# Run specific test file\npytest tests/test_text_editor.py -v\n```\n\nCurrent test coverage: 90%\n\n### Project Structure\n\n```\nmcp-text-editor/\n‚îú‚îÄ‚îÄ mcp_text_editor/\n‚îÇ   ‚îú‚îÄ‚îÄ __init__.py\n‚îÇ   ‚îú‚îÄ‚îÄ __main__.py      # Entry point\n‚îÇ   ‚îú‚îÄ‚îÄ models.py        # Data models\n‚îÇ   ‚îú‚îÄ‚îÄ server.py        # MCP Server implementation\n‚îÇ   ‚îú‚îÄ‚îÄ service.py       # Core service logic\n‚îÇ   ‚îî‚îÄ‚îÄ text_editor.py   # Text editor functionality\n‚îú‚îÄ‚îÄ tests/               # Test files\n‚îî‚îÄ‚îÄ pyproject.toml       # Project configuration\n```\n\n## License\n\nMIT\n\n## Contributing\n\n1. Fork the repository\n2. Create a feature branch\n3. Make your changes\n4. Run tests and code quality checks\n5. Submit a pull request\n\n### Type Hints\n\nThis project uses Python type hints throughout the codebase. Please ensure any contributions maintain this.\n\n### Error Handling\n\nAll error cases should be handled appropriately and return meaningful error messages. The server should never crash due to invalid input or file operations.\n\n### Testing\n\nNew features should include appropriate tests. Try to maintain or improve the current test coverage.\n\n### Code Style\n\nAll code should be formatted with Black and pass Ruff linting. Import sorting should be handled by isort.\n"
}