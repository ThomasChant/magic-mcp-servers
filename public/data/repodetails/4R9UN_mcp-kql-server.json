{
  "mcp_name": "4R9UN/mcp-kql-server",
  "mcp_description": "Facilitates the execution of KQL queries against Azure Data Explorer within Claude Desktop, leveraging Azure CLI for secure authentication and structured data output.",
  "mcp_id": "4R9UN_mcp-kql-server",
  "fetch_timestamp": "2025-06-23T00:08:53.562742Z",
  "github_url": "https://github.com/4R9UN/mcp-kql-server",
  "repository": {
    "name": "mcp-kql-server",
    "full_name": "4R9UN/mcp-kql-server",
    "description": "Kusto and Log Analytics MCP server help you execute a KQL (Kusto Query Language) query within an AI prompt, analyze, and visualize the data.",
    "html_url": "https://github.com/4R9UN/mcp-kql-server",
    "created_at": "2025-04-25T16:55:07Z",
    "updated_at": "2025-06-20T06:51:17Z",
    "pushed_at": "2025-06-20T06:39:04Z",
    "size": 602,
    "stargazers_count": 8,
    "watchers_count": 8,
    "forks_count": 2,
    "open_issues_count": 0,
    "language": "Python",
    "license": null,
    "topics": [
      "kql",
      "kql-threathunting",
      "loganalytics",
      "mcp",
      "mcp-server"
    ],
    "default_branch": "main",
    "owner": {
      "login": "4R9UN",
      "type": "User",
      "avatar_url": "https://avatars.githubusercontent.com/u/27950103?v=4",
      "html_url": "https://github.com/4R9UN"
    },
    "has_issues": true,
    "has_projects": true,
    "has_downloads": true,
    "has_wiki": true,
    "has_pages": false,
    "archived": false,
    "disabled": false,
    "visibility": "public",
    "network_count": 2,
    "subscribers_count": 1,
    "languages": {
      "Python": 10758
    },
    "language_percentages": {
      "Python": 100
    },
    "pull_requests_count": 0,
    "contributors_count": 2
  },
  "readme": "# 🚀 MCP KQL Server\n\nA Model Context Protocol (MCP) server for executing Kusto Query Language (KQL) queries against Azure Data Explorer clusters. Seamlessly integrates with Claude Desktop and Visual Studio Code (VS Code). Supports Azure CLI authentication and provides a convenient `kql_execute` tool for **execute KQL queries** directly within your **AI prompts**, complete with optional visualizations.\n\n![MCP KQL server](https://github.com/4R9UN/mcp-kql-server/blob/main/MCP%20KQL%20Server_%20Image%20.png)\n\n## ✨ Features\n\n- **🔍 Execute KQL Queries**: Run KQL queries directly within your AI prompts using the `kql_execute` MCP tool.\n- **⚡ Plug-and-Play Simplicity**: No manual tenant ID configuration or complex credential management. Simply authenticate via Azure CLI (`az login`) and start querying immediately.\n- **🤖 Seamless Claude Integration**: Execute KQL queries within Claude Desktop without switching interfaces or dashboards.\n- **🔒 Secure and Efficient**: Leverages Azure CLI’s robust authentication, ensuring secure credential handling and optimized query performance.\n- **📊 Visualization Ready**: Optional Markdown table outputs make data analysis intuitive and engaging.\n- **🔑 Azure CLI Authentication**: Built-in Azure CLI authentication with retry and caching logic.\n- **📡 Protocol Compatibility**: Fully compatible with MCP protocol version `2024-11-05`.\n- **🛠️ Reliable Implementation**: Uses `fastmcp` for a robust and reliable MCP server implementation.\n\n### 📌 Comparison with Other Tools\n\n| Feature                      | MCP KQL Server | Azure Data Explorer MCP | Standalone Scripts |\n|------------------------------|----------------|-------------------------|--------------------|\n| Claude Integration           | ✅             | ❌                      | ❌                 |\n| Plug-and-Play Authentication | ✅ (Azure CLI) | ❌ (Manual setup)       | ❌ (Custom code)   |\n| No Tenant ID Required        | ✅             | ❌                      | ❌                 |\n| Data Visualization           | ✅             | ✅                      | ❌                 |\n| Open-Source                  | ✅             | ✅                      | Varies             |\n\n## 📋 Requirements\n\n- Python 3.10 or higher\n- Azure Data Explorer cluster access\n- Azure CLI installed and authenticated (`az login`)\n- Node.js (optional, for Claude Desktop filesystem server)\n- VS Code with Claude extension or MCP client (for VS Code integration)\n\n## 📂 Project Structure\n\n```\nmcp-kql-server/\n├── mcp_kql_server/\n│   ├── __init__.py\n│   ├── mcp_server.py\n│   ├── kql_auth.py\n│   └── execute_kql.py\n├── pyproject.toml\n├── README.md\n```\n\n## 🏗️ Setup Instructions\n\n### 1️⃣ Clone the Repository\n\n```bash\ngit clone https://github.com/4R9UN/mcp-kql-server.git\ncd mcp-kql-server\n```\n\n### 2️⃣ Install Python 3.10+\n\n- **Windows**:\n  ```bash\n  winget install Python.Python.3.10\n  ```\n- **macOS**:\n  ```bash\n  brew install python@3.10\n  ```\n- **Linux**:\n  ```bash\n  sudo apt-get install python3.10\n  ```\n\nVerify installation:\n```bash\npython --version\n```\n\n### 3️⃣ Install Azure CLI\n\n- Follow official instructions: [Install Azure CLI](https://docs.microsoft.com/en-us/cli/azure/install-azure-cli)\n- Log in to Azure:\n  ```bash\n  az config set core.login_experience_v2=off\n  az login\n  ```\n\n### 4️⃣ Create and Activate Virtual Environment\n\n```bash\npython -m venv .venv\n```\n\nActivate environment:\n\n- **Windows**:\n  ```bash\n  .venv\\Scripts\\activate\n  ```\n- **macOS/Linux**:\n  ```bash\n  source .venv/bin/activate\n  ```\n\n### 5️⃣ Install Dependencies\n\n```bash\npip install .\n```\n\n## 🖥️ Setup for Claude Desktop\n\n- Copy `claude_desktop_config.json` to Claude's configuration directory:\n  - **Windows**: `C:\\Users\\YourUser\\AppData\\Roaming\\Claude\\`\n  - **macOS**: `/Users/YourUser/Library/Application Support/Claude/`\n  - **Linux**: Currently not supported by Claude Desktop.\n\n- Update the configuration file with your Python path and project directory:\n\n```json\n{\n  \"mcpServers\": {\n    \"mcp-kql-server\": {\n      \"command\": \"C:\\\\Users\\\\YourUser\\\\mcp-kql-server\\\\.venv\\\\Scripts\\\\python.exe\",\n      \"args\": [\n        \"-m\",\n        \"mcp_kql_server.mcp_server\"\n      ]\n    }\n  }\n}\n```\n\n- Optional: Install Node.js for filesystem server support ([Node.js](https://nodejs.org/)).\n- Restart Claude Desktop.\n\n## 🖱️ Setup for VS Code\n\n- Install [VS Code](https://code.visualstudio.com/).\n- Install the `Copilot MCP` client extension.\n- Modify the MCP `settings.json` with the following configuration:\n\n```json\n{\n  \"mcpServers\": {\n    \"mcp-kql-server\": {\n      \"command\": \"C:\\\\Users\\\\YourUser\\\\mcp-kql-server\\\\.venv\\\\Scripts\\\\python.exe\",\n      \"args\": [\n        \"-m\",\n        \"mcp_kql_server.mcp_server\"\n      ],\n      \"env\": {\n        \"PYTHONPATH\": \"C:\\\\Users\\\\YourUser\\\\Downloads\\\\mcp-kql-server\",\n        \"PYTHONUNBUFFERED\": \"1\",\n        \"AZURE_CORE_ONLY_SHOW_ERRORS\": \"true\"\n      }\n    }\n  }\n}\n```\n\n- Run the `MCP: List Servers` command in VS Code’s Command Palette to verify setup.\n- Enable autodiscovery if using Claude Desktop’s configuration.\n\n## ✅ Test the Server\n\n- **Claude Desktop**:\n  - Open Claude Desktop and provide the following prompt:\n    ```\n    Use a tool to execute the attached KQL query, visualize the results, and provide high-level insights from the query output.\n\n    KQL query: \"cluster('mycluster').database('mydb').MyTable | take 10\"\n    ```\n\n## 🤝 Contributing\n\n- Fork the repository.\n- Create a feature branch:\n  ```bash\n  git checkout -b feature/YourFeature\n  ```\n- Commit your changes:\n  ```bash\n  git commit -m \"Add YourFeature\"\n  ```\n- Push to your branch:\n  ```bash\n  git push origin feature/YourFeature\n  ```\n- Open a Pull Request.\n\n## 📬 Contact\n\nFor issues or questions, please open a ticket on GitHub or contact the maintainer at [arjuntrivedi42@yahoo.com](mailto:arjuntrivedi42@yahoo.com).\n\n🎉 **Happy Querying!**\n"
}