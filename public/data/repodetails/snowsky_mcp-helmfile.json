{
  "mcp_name": "snowsky/mcp-helmfile",
  "mcp_description": "Facilitates Helmfile command execution and management through a standardized MCP interface, enhancing AI-assisted deployments and configurations.",
  "mcp_id": "snowsky_mcp-helmfile",
  "fetch_timestamp": "2025-06-23T08:31:52.203274Z",
  "github_url": "https://github.com/snowsky/mcp-helmfile",
  "repository": {
    "name": "mcp-helmfile",
    "full_name": "snowsky/mcp-helmfile",
    "description": null,
    "html_url": "https://github.com/snowsky/mcp-helmfile",
    "created_at": "2025-04-09T17:13:27Z",
    "updated_at": "2025-04-09T19:28:37Z",
    "pushed_at": "2025-04-09T19:28:34Z",
    "size": 192,
    "stargazers_count": 0,
    "watchers_count": 0,
    "forks_count": 0,
    "open_issues_count": 0,
    "language": "Python",
    "license": null,
    "topics": [],
    "default_branch": "main",
    "owner": {
      "login": "snowsky",
      "type": "User",
      "avatar_url": "https://avatars.githubusercontent.com/u/4934898?v=4",
      "html_url": "https://github.com/snowsky"
    },
    "has_issues": true,
    "has_projects": true,
    "has_downloads": true,
    "has_wiki": true,
    "has_pages": false,
    "archived": false,
    "disabled": false,
    "visibility": "public",
    "network_count": 0,
    "subscribers_count": 1,
    "languages": {
      "Python": 10435
    },
    "language_percentages": {
      "Python": 100
    },
    "pull_requests_count": 0,
    "contributors_count": 1
  },
  "readme": "# Helmfile MCP Server\n\nA FastMCP server for executing Helmfile commands through the Model Context Protocol (MCP). This server provides a standardized interface for managing Helmfile operations, allowing AI assistants to help with Helmfile deployments, configurations, and troubleshooting.\n\n![Sync Helmfile](examples/sync_helmfile.png)\n![List Helmfile](examples/list_helmfile.png)\n\n## Key Features\n\n- **Command Execution**: Execute any Helmfile command with proper validation and error handling\n- **Synchronization**: Specialized tool for synchronizing Helmfile releases\n- **Async Operations**: Asynchronous command execution for better performance\n- **Command Piping**: Support for Unix pipe operations to filter and transform command output\n- **Progress Tracking**: Real-time progress updates through MCP context\n- **Timeout Support**: Configurable command timeouts to prevent hanging operations\n- **Structured Errors**: Detailed error responses with proper error codes and messages\n\n## Installation\n\n### Prerequisites\n\n- Python 3.11 or higher\n- Helmfile installed and available in PATH\n- Access to a Kubernetes cluster\n\n### Install from Source\n\n1. Clone the repository:\n```bash\ngit clone git@github.com:snowsky/mcp-helmfile.git\ncd mcp-helmfile\n```\n\n2. Install dependencies:\n```bash\nuv pip install -e .\n```\n\n## Claude Desktop App Configuration\n\nTo configure the Claude desktop app to work with the MCP servers, you can use the following settings in your `claude_desktop_config.json` file:\n\n```json\n{\n    \"mcpServers\": {\n        \"filesystem\": {\n            \"command\": \"npx\",\n            \"args\": [\n                \"-y\",\n                \"@modelcontextprotocol/server-filesystem\",\n                \"LOCAL_DIRECTORY_ALLOWED_ACCESSED_BY_CLAUDE_DESKTOP\"\n            ]\n        },\n        \"helmfile\": {\n            \"command\": \"uv\",\n            \"args\": [\n                \"--directory\",\n                \"LOCAL_DIRECTORY_THIS_REPO\",\n                \"run\",\n                \"server.py\"\n            ]\n        }\n    }\n}\n```\n\n### Explanation of Configuration\n\n- **filesystem**: This configuration uses `npx` to run the server for filesystem operations, specifying directories for Desktop and Downloads.\n  \n- **helmfile**: This configuration uses `uv` to run the Helmfile server. The `--directory` argument specifies the path to the MCP Helmfile project, and `run server.py` indicates the script to execute.\n\n### Use with Claude Desktop App\n\nAfter adding this configuration, restart the Claude desktop app to ensure it picks up the new settings. You can then interact with the MCP servers as needed.\n\nCopy `helmfile.yaml` file to the above directory `LOCAL_DIRECTORY_ALLOWED_ACCESSED_BY_CLAUDE_DESKTOP`.\n\nFor more information on troubleshooting and advanced configurations, please refer to the [debugging documentation](https://modelcontextprotocol.io/docs/tools/debugging).\n\n## Run in python\n\n### Starting the Server\n\n```bash\npython -m mcp-helmfile.server\n```\n\n### Available Tools\n\n#### 1. execute_helmfile\n\nA general-purpose tool for executing any Helmfile command.\n\nParameters:\n- `command`: Complete Helmfile command to execute (including any pipes and flags)\n- `timeout`: Maximum execution time in seconds (default: 300)\n- `ctx`: Optional MCP context for request tracking\n\nExample:\n```python\nresult = await execute_helmfile(\n    command=\"list\",\n    timeout=60,\n    ctx=context\n)\n```\n\n#### 2. sync_helmfile\n\nA specialized tool for synchronizing Helmfile releases.\n\nParameters:\n- `helmfile_path`: Path to the Helmfile configuration file\n- `namespace`: Optional namespace to target\n- `timeout`: Maximum execution time in seconds (default: 300)\n- `ctx`: Optional MCP context for request tracking\n\nExample:\n```python\nresult = await sync_helmfile(\n    helmfile_path=\"/path/to/helmfile.yaml\",\n    namespace=\"production\",\n    timeout=300,\n    ctx=context\n)\n```\n\n### Response Format\n\nAll tools return a dictionary with the following structure:\n\n```python\n{\n    \"status\": \"success\" | \"error\",\n    \"output\": \"Command output if successful\",\n    \"error\": {\n        \"code\": \"Error code\",\n        \"message\": \"Error message\"\n    }  # Only present if status is \"error\"\n}\n```\n\n## Development\n\n### Running Tests\n\n```bash\npytest\n```\n\n### Building and Publishing\n\n1. Build the package:\n```bash\nuv build\n```\n\n2. Publish to PyPI:\n```bash\nuv publish\n```\n\n## Security Considerations\n\n- Commands are executed with proper validation\n- Dangerous operations like apply/destroy require confirmation\n- Environment-specific commands are validated against allowed environments\n- Command timeouts prevent resource exhaustion\n- Proper error handling and reporting\n\n## License\n\n[MIT License](LICENSE)\n\n## Contributing\n\nContributions are welcome! Please feel free to submit a Pull Request.\n"
}