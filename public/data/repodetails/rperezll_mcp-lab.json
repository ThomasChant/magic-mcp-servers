{
  "mcp_name": "rperezll/mcp-lab",
  "mcp_description": "A personal lab exploring the Model Context Protocol SDK in TypeScript, featuring basic and advanced implementations like a Text-to-SQL server.",
  "mcp_id": "rperezll_mcp-lab",
  "fetch_timestamp": "2025-06-23T08:05:26.217714Z",
  "github_url": "https://github.com/rperezll/mcp-lab",
  "repository": {
    "name": "mcp-lab",
    "full_name": "rperezll/mcp-lab",
    "description": "Laboratorio personal con MCP en TypeScript: MCP Server, MCP Client, Claude Desktop y OpenAI API",
    "html_url": "https://github.com/rperezll/mcp-lab",
    "created_at": "2025-04-13T18:15:22Z",
    "updated_at": "2025-04-19T10:13:36Z",
    "pushed_at": "2025-04-19T10:13:33Z",
    "size": 47,
    "stargazers_count": 0,
    "watchers_count": 0,
    "forks_count": 0,
    "open_issues_count": 0,
    "language": "TypeScript",
    "license": null,
    "topics": [],
    "default_branch": "main",
    "owner": {
      "login": "rperezll",
      "type": "User",
      "avatar_url": "https://avatars.githubusercontent.com/u/18597843?v=4",
      "html_url": "https://github.com/rperezll"
    },
    "has_issues": true,
    "has_projects": true,
    "has_downloads": true,
    "has_wiki": true,
    "has_pages": false,
    "archived": false,
    "disabled": false,
    "visibility": "public",
    "network_count": 0,
    "subscribers_count": 1,
    "languages": {
      "TypeScript": 24697,
      "JavaScript": 1639
    },
    "language_percentages": {
      "TypeScript": 93.78,
      "JavaScript": 6.22
    },
    "pull_requests_count": 0,
    "contributors_count": 1
  },
  "readme": "# MCP Lab\n\nEste repositorio es un laboratorio personal donde he estado trasteando con el SDK de [**Model Context Protocol**](https://modelcontextprotocol.io/introduction) ([@modelcontextprotocol/sdk](https://github.com/modelcontextprotocol/typescript-sdk)) usando TypeScript. La idea principal es entender bien c贸mo funciona el protocolo, hacer pruebas r谩pidas y montar casos de uso m谩s reales seg煤n me iba sintiendo c贸modo con la herramienta.\n\n## Estructura del proyecto\n\n```text\n.\n  mcp-server-dummies/   # Primeros pasos usando el SDK de MCP.\n  mcp-lab-text2sql/     # Caso de uso avanzado: Text-to-SQL sobre una base de datos SQLite.\n  mcp-client/           # Integraci贸n con OpenAI API para su integraci贸n con un Server MCP.\n```\n\n## И mcp-server-dummies\n\nEste proyecto contiene una implementaci贸n b谩sica para familiarizarse con el SDK de MCP. Fue pensado como un primer acercamiento al protocolo, 煤til para pruebas simples y entender su funcionamiento (nada sofisticado).\n\n### Instalaci贸n\n\n> [!NOTE] \n> El proyecto requiere una versi贸n de Node.js >= v20.\n\n```bash\ncd mcp-server-dummies\nnpm i\n```\n\n### Ejecuci贸n\n\n```bash\nnpm run build     # Compila el proyecto con tsc\nnpm run dev       # Ejecuta el servidor con ts-node\n```\n\nComo herramienta de depuraci贸n, podemos utilizar el siguiente comando, que lanza el [**MCP Inspector**](https://github.com/modelcontextprotocol/inspector). Esta utilidad proporciona una interfaz visual para probar y depurar nuestro servidor MCP de forma m谩s c贸moda e interactiva.\n\n```bash\nnpm run test\n```\n\nEl comando nos expone el inspector en [http://localhost:6274](http://localhost:6274) asociado a nuestro servidor MCP.\n\n##  mcp-lab-text2sql\n\nEste segundo proyecto implementa un sistema de Text-to-SQL: se puede chatear con una base de datos SQLite utilizando lenguaje natural. Este servidor MCP expone las herramientas y recursos necesarios para que nuestro LLM sea capaz de chatear con nuestros datos.\n\n### Instalaci贸n\n\n> [!NOTE] \n> El proyecto requiere una versi贸n de Node.js >= v20.\n\n```bash\ncd mcp-server-dummies\nnpm i\n```\n\n### Ejecuci贸n\n\n```bash\nnpm run build     # Compila el proyecto con tsc\nnpm run dev       # Ejecuta el servidor con ts-node\n```\n\nComo herramienta de depuraci贸n, podemos utilizar el siguiente comando, que lanza el [**MCP Inspector**](https://github.com/modelcontextprotocol/inspector). Esta utilidad proporciona una interfaz visual para probar y depurar nuestro servidor MCP de forma m谩s c贸moda e interactiva.\n\n```bash\nnpm run test\n```\n\nEl comando nos expone el inspector en [http://localhost:6274](http://localhost:6274) asociado a nuestro servidor MCP.\n\n## Claude Desktop\n\nPodemos probar nuestros servidores MCP desde [**Claude Desktop**](https://claude.ai/download). Para asociar nuestros servidores MCP debemos modificar el archivo `claude_desktop_config.json` de la siguiente manera:\n\n```json\n{\n    \"mcpServers\": {\n        \"mcp-lab-dummies\": {\n            \"command\": \"node\",\n            \"args\": [\n                \"C://PATH//mcp-lab//mcp-server-dummies//dist//index.js\"\n            ]\n        },\n        \"mcp-lab-text2sql\": {\n            \"command\": \"node\",\n            \"args\": [\n                \"C://PATH//mcp-lab//mcp-server-text2sql//dist//index.js\"\n            ]\n        }\n    }\n}\n```\n\n> [!IMPORTANT] \n> Recuerda ejecutar `npm run build` dentro de cada proyecto previamente.\n\n驴D贸nde se encuentra `claude_desktop_config.json` en Windows? ★ `PATH//AppData//Roaming//Claude`.\n\nPara conocer m谩s sobre la sintaxis y ubicaci贸n de este archivo de configuraci贸n usa la [documentaci贸n oficial](https://modelcontextprotocol.io/quickstart/user).\n\n## Compatibilidad con OpenAI\n\nUsar servidores MCP con OpenAI funciona bien cuando se trata de Tools. Pero si lo que queremos es consumir Recursos, todo se vuelve m谩s complejo.\n\n> [!NOTE]\n> Ojo: se pueden usar servidores MCP de forma nativa con el SDK de agentes de OpenAI, aunque por ahora ese SDK solo est谩 disponible en Python. En mi caso, las pruebas las estoy haciendo con el SDK de OpenAI para TypeScript, usando la Responses API.\n\nVale... tengo mi servidor MCP que expone varias Tools usables desde Claude Desktop. Hasta ah铆 todo perfecto. Pero ahora me pregunto: 驴puedo usar ese mismo servidor MCP en un agente que funciona con la API de OpenAI?\n\nEn primera instancia usar modelos GPT y conectarlos a nuestro MCP Server no es compatible. La definci贸n de Tool de **@modelcontextprotocol** y **OpenAI** son diferentes. 驴Quiere decir que no lo puedo utilizar? No exactamente. Vamos a construir un MCP Client que habilite esta integraci贸n.\n\n> [!IMPORTANT]\n> Esta especificaci贸n es compatible con la versi贸n `4.95.0` del **SDK de OpenAI para TypeScript** y la versi贸n `1.9.0` de **@modelcontextprotocol/sdk**.\n\nTipo devuelto por la funci贸n **getTools()** de nuestro Cliente MCP:\n\n```ts\nimport type { Tool } from \"@modelcontextprotocol/sdk/types.js\";\n\nconst mcpTool: Tool = {\n  name: \"getUser\",\n  description: \"Get a user by ID\",\n  inputSchema: z.object({\n    type: z.literal(\"object\"),\n    properties: z.object({\n      id: z.string()\n    })\n  })\n}\n```\n\nTipo que espera la **Responses API de OpenAI** para trabajar con tools:\n\n[Documentaci贸n OpenAI](https://platform.openai.com/docs/guides/function-calling?api-mode=responses)\n\n```ts\nimport OpenAI from \"openai\";\n\n// El campo \"parameters\" es un JSON Schema\n\nconst openaiTool: OpenAI.Responses.Tool {\n  \"type\": \"function\",\n  \"name\": \"getUser\",\n  \"description\": \"Get a user by ID\",\n  \"parameters\": {\n    \"type\": \"object\",\n    \"properties\": {\n      \"id\": { \"type\": \"string\" }\n    },\n    \"required\": [\"id\"],\n    \"additionalProperties\": false\n  },\n  \"strict\": true\n}\n```\n\n### Limitaciones\n\nCuando configuramos nuestra Tool en el servidor MCP debemos tener en cuenta algunas opciones **no compatibles con OpenAI**, a la hora de tipar nuestros argumentos usando Zod:\n\nTodos los par谩metros deben ser **requeridos**:\n```text\nInvalid schema for function 'update-user-goal': In context=(), 'required' is required to be supplied and to be an array including every key in properties.\n```\n\nNo podemos usar **max()** o **min()** a la hora de definir un campo int():\n```text\nInvalid schema for function 'update-user-goal': In context=('properties', 'age', 'anyOf', '0'), 'minimum|maximun' is not permitted.\n```\n\nNo podemos usar **default()** para establecer valores por defecto:\n```text\nBadRequestError: 400 Invalid schema for function 'update-user-goal': In context=('properties', 'hasPaid', 'anyOf', '0'), 'default' is not permitted.\n```\n\n### Demo *test*\n\n> [!NOTE] \n> El proyecto requiere una versi贸n de Node.js >= v20.\n\nEjecuta la demo con un Agente LLM usando OpenAI.\n\n1. Ejecuta `npm run build` dentro del directorio **mcp-server-dummies** ya que ese es el MCP Server que vamos a utilizar.\n\n2. Instala las dependencias con `npm i`, dentro del directorio **mcp-client**.\n\n3. Ejecuta la demo, en el directorio **mcp-client**, usando el comando `npm run dev`.\n\n- No olvides crear tu `.env`, dentro de **mcp-client**, con tu API Key v谩lida de OpenAI:\n\n  ```env\n  OPENAI_API_KEY=<openai_key>\n  ```\n\n\n##  Licencia\n\n**MIT 漏 [rperezll](https://github.com/rperezll)**"
}