# Supabase æ•°æ®è¿ç§»å·¥ä½œæµç¨‹

## æ¦‚è¿°

æœ¬é¡¹ç›®ç°åœ¨æ”¯æŒä¸¤ç§æ•°æ®æºï¼š
1. **JSON æ–‡ä»¶**ï¼ˆé»˜è®¤ï¼‰- é€‚ç”¨äºå¼€å‘å’Œç®€å•éƒ¨ç½²
2. **Supabase æ•°æ®åº“** - é€‚ç”¨äºç”Ÿäº§ç¯å¢ƒçš„å¯æ‰©å±•è§£å†³æ–¹æ¡ˆ

## å¿«é€Ÿå¼€å§‹

### 1. è®¾ç½® Supabase é¡¹ç›®

1. è®¿é—® [supabase.com](https://supabase.com) åˆ›å»ºæ–°é¡¹ç›®
2. è®°å½•ä»¥ä¸‹ä¿¡æ¯ï¼š
   - Project URL
   - Anon Key (å…¬å¼€å¯†é’¥)
   - Service Key (æœåŠ¡å¯†é’¥ï¼Œä»…ç”¨äºæ•°æ®è¿ç§»)

### 2. é…ç½®ç¯å¢ƒå˜é‡

```bash
# å¤åˆ¶ç¯å¢ƒå˜é‡ç¤ºä¾‹æ–‡ä»¶
cp .env.example .env

# ç¼–è¾‘ .env æ–‡ä»¶ï¼Œå¡«å…¥ä½ çš„ Supabase é…ç½®
VITE_USE_SUPABASE=true
VITE_SUPABASE_URL=https://your-project.supabase.co
VITE_SUPABASE_ANON_KEY=your-anon-key
SUPABASE_SERVICE_KEY=your-service-key  # ä»…ç”¨äºæ•°æ®è¿ç§»
```

### 3. åˆ›å»ºæ•°æ®åº“è¡¨ç»“æ„

#### æ–¹æ³• Aï¼šä½¿ç”¨ SQL ç¼–è¾‘å™¨ï¼ˆæ¨èï¼‰

1. æ‰“å¼€ Supabase æ§åˆ¶å°çš„ SQL ç¼–è¾‘å™¨
2. å¤åˆ¶ `supabase/schema.sql` çš„å†…å®¹
3. æ‰§è¡Œ SQL è„šæœ¬

#### æ–¹æ³• Bï¼šä½¿ç”¨ Supabase CLI

```bash
# å®‰è£… Supabase CLI
npm install -g supabase

# ç™»å½•
supabase login

# é“¾æ¥é¡¹ç›®
supabase link --project-ref your-project-ref

# æ‰§è¡Œæ•°æ®åº“è¿ç§»
supabase db push
```

### 4. å¯¼å…¥æ•°æ®

æˆ‘ä»¬æä¾›äº†ä¸¤ç§æ•°æ®å¯¼å…¥æ–¹å¼ï¼š

#### æ–¹æ³• Aï¼šä½¿ç”¨ SQL æ–‡ä»¶ï¼ˆæ¨èç”¨äºä¸€æ¬¡æ€§å¯¼å…¥ï¼‰

```bash
# ç”Ÿæˆ SQL å¯¼å…¥æ–‡ä»¶
npm run supabase:sql

# è¿™ä¼šç”Ÿæˆ supabase/data-import.sql æ–‡ä»¶
# åŒ…å«æ‰€æœ‰æ•°æ®çš„æ‰¹é‡æ’å…¥è¯­å¥
```

ç„¶ååœ¨ Supabase SQL ç¼–è¾‘å™¨ä¸­æ‰§è¡Œç”Ÿæˆçš„ SQL æ–‡ä»¶ã€‚

#### æ–¹æ³• Bï¼šä½¿ç”¨ TypeScript è¿ç§»è„šæœ¬ï¼ˆé€‚ç”¨äºå¢é‡æ›´æ–°ï¼‰

```bash
# è¿è¡Œè¿ç§»è„šæœ¬
npm run supabase:migrate

# éœ€è¦è®¾ç½® SUPABASE_SERVICE_KEY ç¯å¢ƒå˜é‡
```

### 5. å¯åŠ¨åº”ç”¨

```bash
# ä½¿ç”¨ Supabase ä½œä¸ºæ•°æ®æº
npm run supabase:dev

# æˆ–è€…æ„å»ºç”Ÿäº§ç‰ˆæœ¬
npm run supabase:build
```

## æ•°æ®ç»Ÿè®¡

å½“å‰æ•°æ®é›†åŒ…å«ï¼š
- ğŸ“¦ 10 ä¸ªä¸»åˆ†ç±»ï¼Œ39 ä¸ªå­åˆ†ç±»
- ğŸ·ï¸ 1,517 ä¸ªå”¯ä¸€æ ‡ç­¾
- ğŸ–¥ï¸ 1,842 ä¸ª MCP æœåŠ¡å™¨
- ğŸ”— 5,526 ä¸ªæœåŠ¡å™¨-æ ‡ç­¾å…³ç³»
- ğŸš€ 3,684 ä¸ªéƒ¨ç½²é…ç½®é¡¹

## åˆ‡æ¢æ•°æ®æº

é€šè¿‡ç¯å¢ƒå˜é‡æ§åˆ¶æ•°æ®æºï¼š

```bash
# ä½¿ç”¨ JSON æ–‡ä»¶ï¼ˆé»˜è®¤ï¼‰
VITE_USE_SUPABASE=false npm run dev

# ä½¿ç”¨ Supabase æ•°æ®åº“
VITE_USE_SUPABASE=true npm run dev
```

## é¡¹ç›®ç»“æ„

```
mcp-db/
â”œâ”€â”€ supabase/
â”‚   â”œâ”€â”€ schema.sql         # æ•°æ®åº“è¡¨ç»“æ„
â”‚   â””â”€â”€ data-import.sql    # æ‰¹é‡å¯¼å…¥ SQLï¼ˆç”Ÿæˆçš„ï¼‰
â”œâ”€â”€ scripts/
â”‚   â”œâ”€â”€ json-to-sql.ts     # JSON è½¬ SQL è„šæœ¬
â”‚   â””â”€â”€ migrate-to-supabase.ts  # API è¿ç§»è„šæœ¬
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ lib/
â”‚   â”‚   â””â”€â”€ supabase.ts    # Supabase å®¢æˆ·ç«¯é…ç½®
â”‚   â””â”€â”€ hooks/
â”‚       â”œâ”€â”€ useData.ts     # JSON æ•°æ® hooks
â”‚       â”œâ”€â”€ useSupabaseData.ts  # Supabase æ•°æ® hooks
â”‚       â””â”€â”€ useUnifiedData.ts   # ç»Ÿä¸€æ•°æ®æ¥å£
â””â”€â”€ .env.example           # ç¯å¢ƒå˜é‡ç¤ºä¾‹
```

## ä¼˜åŠ¿

### Supabase çš„ä¼˜åŠ¿
- âœ… **å®æ—¶æ›´æ–°** - æ•°æ®å˜æ›´ç«‹å³åæ˜ 
- âœ… **é«˜çº§æœç´¢** - PostgreSQL å…¨æ–‡æœç´¢
- âœ… **å¯æ‰©å±•æ€§** - è½»æ¾å¤„ç†å¤§é‡æ•°æ®
- âœ… **æ€§èƒ½ä¼˜åŒ–** - æ•°æ®åº“ç´¢å¼•å’Œç¼“å­˜
- âœ… **å®‰å…¨æ€§** - è¡Œçº§å®‰å…¨ç­–ç•¥ (RLS)

### ä¿æŒå‘åå…¼å®¹
- âœ… JSON æ–‡ä»¶ä»ç„¶å¯ç”¨
- âœ… æ— éœ€ä¿®æ”¹ç»„ä»¶ä»£ç 
- âœ… ç»Ÿä¸€çš„æ•°æ®æ¥å£
- âœ… è½»æ¾åˆ‡æ¢æ•°æ®æº

## æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

1. **æ•°æ®å¯¼å…¥å¤±è´¥**
   - ç¡®ä¿æ•°æ®åº“è¡¨å·²åˆ›å»º
   - æ£€æŸ¥ Service Key æ˜¯å¦æ­£ç¡®
   - æŸ¥çœ‹ SQL é”™è¯¯ä¿¡æ¯

2. **åº”ç”¨æ— æ³•è¿æ¥**
   - éªŒè¯ç¯å¢ƒå˜é‡è®¾ç½®
   - ç¡®ä¿ URL å’Œ Anon Key æ­£ç¡®
   - æ£€æŸ¥ç½‘ç»œè¿æ¥

3. **æ€§èƒ½é—®é¢˜**
   - æ£€æŸ¥æ•°æ®åº“ç´¢å¼•
   - ä½¿ç”¨ Supabase æ§åˆ¶å°ç›‘æ§æŸ¥è¯¢
   - å¯ç”¨æŸ¥è¯¢ä¼˜åŒ–

### è°ƒè¯•æ¨¡å¼

```javascript
// åœ¨æµè§ˆå™¨æ§åˆ¶å°å¯ç”¨è°ƒè¯•
localStorage.setItem('supabase.debug', 'true');
```

## ä¸‹ä¸€æ­¥

- ğŸ“Š æ·»åŠ å®æ—¶æ•°æ®æ›´æ–°åŠŸèƒ½
- ğŸ” å®ç°é«˜çº§æœç´¢åŠŸèƒ½
- ğŸ“ˆ æ·»åŠ æ•°æ®åˆ†æä»ªè¡¨æ¿
- ğŸ”’ å®ç°ç”¨æˆ·è®¤è¯å’Œæƒé™ç®¡ç†

## æ”¯æŒ

- Supabase æ–‡æ¡£ï¼šhttps://supabase.com/docs
- é¡¹ç›®é—®é¢˜ï¼šæäº¤ GitHub Issue
- ç¤¾åŒºæ”¯æŒï¼šSupabase Discord